#include <stdio.h>
#include <string.h>
#include <stdbool.h>
#include <stdlib.h>

struct Mahasiswa
{
    long long int studentID;
    char name[50];
    int entryYear;
    float GPA;
};

int main(){

    FILE *fl = fopen("C:\\Arts and Literatures\\Studying Progress\\College\\Academic Year\\2nd Semester\\CS\\Algorithm and Programming Practicum\\Experiments\\Assignments\\Database\\Database.csv", "a");
    if (fl == NULL)
    {
        printf("Failed to open the file.\n");
        exit(1);
    }

    long long int studentIDNumber;
    int studentsTotal, entryYear;
    char studentName[50];
    float gpa;

    printf("\nHow many students? ");
    scanf("%d", &studentsTotal);
    struct Mahasiswa students[studentsTotal]; 

    for(int i = 0; i < studentsTotal; i++){

        printf("\nStudent ID Number: ");
        scanf("%lld", &students[i].studentID);
        printf("Name: ");
        scanf(" %[^\n]", students[i].name); 
        printf("Year of Entry: ");
        scanf("%d", &students[i].entryYear);
        printf("GPA of said students: ");
        scanf("%f", &students[i].GPA);

        fprintf(fl, "%lld,%s,%d,%.2f\n", students[i].studentID, students[i].name, students[i].entryYear, students[i].GPA);
    }

    fclose(fl);

    fl = fopen("C:\\Arts and Literatures\\Studying Progress\\College\\Academic Year\\2nd Semester\\CS\\Algorithm and Programming Practicum\\Experiments\\Assignments\\Database\\Database.csv", "r");
    if(fl == NULL)
    {
        printf("Failed to open the file for reading.\n");
        exit(1);
    }

    struct Mahasiswa mhs;
    printf("| %-11s| %-14s| %-17s | %s |\n", "Student ID", "Name", "Year of Entry", "GPA");
    while(fscanf(fl, "%lld,%[^,],%d,%f\n", &mhs.studentID, mhs.name, &mhs.entryYear, &mhs.GPA) != EOF){
        printf("| %-11lld| %-14s| %-17d | %.2f |\n", mhs.studentID, mhs.name, mhs.entryYear, mhs.GPA);
    }

    fclose(fl);

    return 0;
}
