#include <stdio.h>
#include <string.h>
#include <stdbool.h>
#include <stdlib.h>

struct Mahasiswa {
    long long int studentID;
    char name[50];
    int entryYear;
    float GPA;
};

int main(){

    FILE *fl = fopen("C:/Arts and Literatures/Studying Progress/College/Academic Year/2nd Semester/CS/Algorithm and Programming Practicum/Experiments/Assignments/Database/Database.csv", "a");
    if (fl == NULL) {
        printf("Failed to open the file.\n");
        exit(1);
    }

    int choice;
    printf("Welcome to the Student Management System\n");
    printf("1. Add Students\n");
    printf("2. Delete Students\n");
    printf("3. Modify Students\n");
    printf("4. Display Students\n");
    printf("5. Search Students\n");
    printf("6. Exit\n");
    printf("Your choice: ");
    scanf("%d", &choice);

    switch(choice){
        case 1:
            {
                long long int studentIDNumber;
                int studentsTotal;
                char studentName[50];
                float gpa;

                printf("\nHow many students? ");
                scanf("%d", &studentsTotal);
                struct Mahasiswa students[studentsTotal]; 

                for(int i = 0; i < studentsTotal; i++){
                    printf("\nStudent ID Number: ");
                    scanf("%lld", &students[i].studentID);
                    printf("Name: ");
                    scanf(" %[^\n]", students[i].name);
                    printf("Year of Entry: ");
                    scanf("%d", &students[i].entryYear);
                    printf("GPA of said students: ");
                    scanf("%f", &students[i].GPA);

                    fprintf(fl, "%lld,%s,%d,%.2f\n", students[i].studentID, students[i].name, students[i].entryYear, students[i].GPA);
                }

                fclose(fl);

            }
            break;
        case 2:
            
        case 3:
            fclose(fl);
            printf("Exiting the program.\n");
            exit(0);
        default:
            printf("Invalid choice. Exiting the program.\n");
            fclose(fl);
            exit(1);
    }

    return 0;
}
